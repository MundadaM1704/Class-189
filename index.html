<!DOCTYPE html>
<html>
  <head>
    <title>Car Drive Simulation</title>
  </head>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
  <script
    src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js"
    crossorigin="anonymous"
  ></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <body>
    <a-scene id="scene" background="color: lightblue" inspector-plugin-recast>
      <a-assets>
        <a-asset-item
          id="city"
          src="./assets/low_poly_city/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="wheel"
          src="./assets/steering_wheel/scene.gltf"
        ></a-asset-item>
        <a-asset-item id="collider" src="./assets/navmesh.gltf"></a-asset-item>
      </a-assets>

      <a-entity light="type: ambient; color: white; intensity: 1.5"></a-entity>
      <a-entity
        light="type: directional; color: #A4A4AP; intensity: 0.6"
        position="0 15 20"
      ></a-entity>

      <a-entity
        id="cityset"
        gltf-model="#city"
        position="10 -2 -150"
        rotation="0 90 0"
        scale="1 1 1"
      ></a-entity>
      <a-box
        id="b1"
        material="height: 400; metalness: 0.34"
        color="red"
        geometry="depth: 400; height: 50; width: 5"
        position="-76.79446 -8.30764 -164.16795"
      ></a-box>
      <a-box
        id="b2"
        material="height: 400; metalness: 0.34"
        color="red"
        geometry="depth: 400; height: 50; width: 5"
        position="75.38341 -8.30764 -164.16795"
      ></a-box>
      <a-box
        id="b3"
        material="height: 400; metalness: 0.34"
        color="red"
        geometry="depth: 5; height: 50; width: 200"
        position="-0.33183 -7.8421 -359.48732"
      ></a-box>
      <a-box
        id="b4"
        material="height: 400; metalness: 0.34"
        color="red"
        geometry="depth: 5; height: 50; width: 200"
        position="-0.33183 -7.8421 31.16964"
      ></a-box>

      <a-plane
        id="ground"
        geometry="height: 200; width: 200; depth: 10"
        repeat="5 5"
        position="0 -10 -163.73258"
        rotation="-90 0 0"
        color="yellow"
        visible="false"
      ></a-plane>

      <a-entity
        id="navMesh"
        gltf-model="#collider"
        position="0 10 0"
        visible="false"
        nav-mesh
      ></a-entity>
      <a-entity
        id="camera-rig"
        movement-controls="speed: 0.5; constrainToNavMesh: true"
        position="0 1 5"
        rotation="0 0 0"
        drive
        game="play"
      >
        <a-entity
          id="camera"
          camera
          position="0 1.6 0"
          rotation="0 0 0"
          look-controls="pointerLockEnabled: false"
        >
          <a-entity
            id="control-wheel"
            gltf-model="#wheel"
            position="0.13 -0.120 -0.136"
            rotation="0 0 0"
            scale="0.1 0.1 0.1"
          ></a-entity>
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
